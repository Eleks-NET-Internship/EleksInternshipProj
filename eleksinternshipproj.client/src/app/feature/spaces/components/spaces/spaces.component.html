<div class="space-container">
  <!-- Header -->
  <div class="space-header">
    <div class="header-title">Мої простори</div>

    <div class="header-actions">
      <div class="add-space-wrapper" #addMenuWrapper>
      <button class="add-space-btn" (click)="toggleAddMenu()">+ Додати простір</button>

        <div class="add-dropdown" *ngIf="showAddMenu">
          <button class="dropdown-item" (click)="createSpace()">Створити власний</button>
          <button class="dropdown-item" disabled title="Незабаром">Приєднатись до існуючого</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Divider -->
  <div class="space-divider"></div>

  <!-- Main content -->
  <div class="space-content">
    @if (spaces.length === 0) {
      <div class="empty-message">Пусто</div>
    } @else {
      @for (space of spaces; track space.id) {
        <div class="space-card">
          <div class="space-info">
            <div class="space-name">{{ space.name }}</div>
            <div class="space-divider"></div>
            <div class="user-chips">
      <span *ngFor="let us of space.userSpaces"
            class="user-chip"
            [class.admin]="us.roleId === 1"
            [title]="us.user.firstName + ' ' + us.user.lastName + ' (' + us.user.email + ')'">
        {{ us.user.username }}
      </span>
            </div>
          </div>

          <div class="space-actions">
            <button class="action-btn" (click)="renameSpace(space)">Редагувати</button>
            <button class="action-btn" (click)="addUserToSpace(space.id)">+ Користувач</button>
            <button class="action-btn delete" (click)="deleteSpace(space.id)">Видалити</button>
          </div>
        </div>

      }
    }
  </div>
</div>
